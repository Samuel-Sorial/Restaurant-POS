<%- include('../includes/navbar.ejs') %>
<link rel="stylesheet" href="/css/lib/fonts.css">
<link rel="stylesheet" href="/css/lib/all.css">
</head>
<body>
    <div class="d-flex flex-column" id="content-wrapper">
        <div class="container">
            <form method="POST" action="/admin/manage-category-<%= category.categoryId %>">
                <h3 style="padding-top: 25px;">Edit category name:</h1>
                <div class="form-group"><input name="categoryName" class="form-control" type="text" value="<%= category.name %>"></div>
                <button class="btn btn-primary btn-block text-white btn-user" type="submit">Save category</button>
            </form>
            <form id="<%= category.categoryId %>" style="margin-top: 25px;" action="/admin/manage-category" method="GET">
                <button id="delete" class="btn btn-primary btn-block text-white btn-user" type="submit">Delete Category</button>
            </form>             
        </div>

    <script src="/js/lib/jquery.min.js"></script>
    <script src="/js/lib/bootstrap.bundle.min.js"></script>
    <script src="/js/lib/Chart.bundle.min.js"></script>
    <script src="/js/bs-init.js"></script>
    <script src="/js/lib/jquery.easing.js"></script>
    <script src="/js/theme.js"></script>
        <script>
            document.getElementById('delete').addEventListener("click", (event) => {
                let sure = confirm('Are you sure you want to delete this category? Note: if you delete, all products inside it will be deleted');
                if(sure){
                    const id = event.target.parentElement.id;
                    fetch( `http://` + window.location.host + `/admin/manage-category-${id}`, {
                        method: 'DELETE'})
                    .then()
                    .catch(err=> console.log(err));
                    }
            });
        </script>
</body>


<%- include('../includes/end.ejs') %>